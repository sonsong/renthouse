<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hss.renthouse.admins.rental.dao.RentalMapper">

	<!-- 查询所有租金 -->
	<resultMap type="rental" id="getRentalsResultMap">
		<id column="mid" property="mid" />
		<result column="uid" property="uid" />
		<result column="mname" property="mname" />
		<result column="mtele" property="mtele" />
		<result column="mptime" property="mptime" />
		<result column="mstime" property="mstime" />
		<result column="mtime" property="mtime" />
		<result column="mntime" property="mntime" />
		<result column="mprice" property="mprice" />
		<association property="user" javaType="user">
			<id column="uid" property="uid" />
			<result column="uname" property="uname" />
		</association>
	</resultMap>
	<select id="queryAllRentals" parameterType="bQueryVo" resultMap="getRentalsResultMap">
		select r.mid, r.mname, r.mtele, 
		r.mptime, r.mstime, r.mtime, r.mntime,
		r.mprice, u.uid, u.uname from t_rental r 
		inner join t_user u on r.uid = u.uid
		order by
		#{sort}
		#{sortOrder}
		limit #{offset}, #{ps}
	</select>
	<!-- 查询租金总数 -->
	<select id="queryRentalsTotal" resultType="integer">
		select count(*) from
		t_rental
	</select>

	<!-- 新增租金记录 -->
	<insert id="addRental" parameterType="rental">
		insert into t_rental
		values
		(
		#{mid}, #{mname}, #{mtele}, #{mptime}, #{mstime}, #{mtime},
		#{mntime},
		#{mprice}, #{uid}
		)
	</insert>
</mapper> 